<div class="row">
  <div class="col-12">
    <nb-card>
      <nb-card-header>Filter Laporan Return Penjualan</nb-card-header>
      <nb-card-body>
        <div class="row">
          <div class="col-md-5">
            <div class="form-control-group">
              <label class="label" for="inputTglAwal">Tanggal Awal</label>
              <input type="date" [(ngModel)]="tglAwal" name="tglAwal" nbInput fullWidth id="inputTglAwal" placeholder="Masukan Tanggal Awal">
            </div>
          </div>
          <div class="col-md-5">
            <div class="form-control-group">
              <label class="label" for="inputTglAkhir">Tanggal Akhir</label>
              <input type="date" [(ngModel)]="tglAkhir" name="tglAkhir" nbInput fullWidth id="inputTglAkhir" placeholder="Masukan Tanggal Akhir">
            </div>
          </div>
          <div class="col-md-2">
            <div class="form-control-group">
              <label class="label">&nbsp;</label>
              <button (click)="cari()" nbButton status="primary" fullWidth>Filter</button>
            </div>
          </div>
        </div>
      </nb-card-body>
    </nb-card>
  </div>
</div>

<div class="row">
  <div class="col-12">
    <nb-card>
      <nb-card-header>Data Laporan Return Penjualan</nb-card-header>
      <nb-card-body>
        <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="row-border hover">
          <thead>
            <tr>
              <th>No Faktur Return</th>
              <th>No Faktur Penjualan</th>
              <th>Tanggal</th>
              <th>Nama Customer</th>
              <th>Kota</th>
              <th>Total</th>
              <th>Aksi</th>
            </tr>
          </thead>
          <tbody *ngIf="returnPenjualan?.length != 0">
              <tr *ngFor="let retur of returnPenjualan; let i = index">
                  <td>{{ retur.fc_noretur }}</td>
                  <td>{{ retur.fc_nofaktur }}</td>
                  <td>{{ retur.tanggal }}</td>
                  <td>{{ retur.fv_nama }}</td>
                  <td>{{ retur.fc_kota }}</td>
                  <td>{{ retur.fm_total }}</td>
                   <td >
                    <span class="edit" >
                      <button *ngIf="u" (click)="detailRetur(retur.fc_noretur)" title="" data-toggle="modal" data-target="#quick-view-modal" nbButton status="success" size="small">Detail Retur</button>
                    </span>
                  </td>
              </tr>
          </tbody>
          <tbody *ngIf="returnPenjualan?.length == 0">
            <tr>
              <td colspan="7" class="no-data-available">No data!</td>
            </tr>
          <tbody>
        </table>
      </nb-card-body>
    </nb-card>
  </div>
</div>

<div *ngIf="openModalRetur"  style="position: absolute; top: 16vh; left: 21%; width: 76%; height: 43vh; display: flex; align-items: center; justify-content: center; z-index: 1002;">
  <nb-card [nbSpinner]="loading"
  nbSpinnerStatus="danger"
  nbSpinnerSize="large"
  nbSpinnerMessage="Loading....." style="width: 100%; height: 100%; overflow: hidden; margin: 0;">
    <nb-card-header>Rincian Barang</nb-card-header>
		<nb-card-body style="padding: 1rem;">

			<table datatable class="row-border hover" *ngIf="Rincian.length > 0">
	          <thead >
	            <tr>
	              <th scope="col">Kode Barang</th>
	              <th scope="col">Barang</th>
	              <th scope="col">Tipe</th>
	              <th scope="col">Brand</th>
	              <th scope="col">Group</th>
	              <th scope="col">Satuan</th>
	              <th scope="col">Jumlah</th>
	              <th scope="col">Subtotal</th>
	            </tr>
	          </thead>
	          <tbody>
	            <tr *ngFor="let rincian of Rincian; let i = index">
	              <th scope="row">{{rincian.fc_kdstock}}</th>
	              <td>{{rincian.fv_namastock}}</td>
	              <td>{{rincian.fv_nmtipe}}</td>
	              <td>{{rincian.fv_nmbrand}}</td>
	              <td>{{rincian.fv_nmgroup}}</td>
	              <td>{{rincian.fv_satuan}}</td>
	              <td>{{rincian.fn_qtyretur}}</td>
	              <td>{{rincian.fm_subtot}}</td>
	             
	            </tr>
	          </tbody>
	        </table>
    	</nb-card-body>
    <nb-card-footer>
		<button nbButton (click)="hideModelRetur()">Tutup</button>
	</nb-card-footer>
  </nb-card>
</div>